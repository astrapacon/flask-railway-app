{% extends "base.html" %}
{% block title %}Presen√ßa confirmada{% endblock %}

{% block head_extra %}
<style>
  .center{text-align:center}
  .muted{color:#666}
  .mono{font-family:ui-monospace,Menlo,Consolas,monospace}
  .mt{margin-top:16px}

  /* Pill com logo do Programa de Multiplicadores */
  .pill{
    display:inline-flex;align-items:center;gap:10px;
    padding:6px 12px;border:1px solid var(--line);
    border-radius:999px;font-weight:800;opacity:.95;
    background:#fafafa;
  }
  .pill .logo{
    width:22px;height:22px;object-fit:contain;display:block;
    filter:drop-shadow(0 1px 1px rgba(0,0,0,.08));
  }

  .title{font-size:1.8rem;font-weight:900;margin:14px 0 8px}
  .subtitle{font-size:1.05rem;color:#444;margin:0 0 6px}

  /* --- ENVELOPE MENOR E CENTRALIZADO --- */
  .envelope-stage{
    display:grid;place-items:center;
    margin:32px auto 16px;
    min-height:140px;
  }
  .envelope{
    --env-w: 130px; /* envelope menor */
    width: var(--env-w);
    height: calc(var(--env-w) * 0.6);
    position:relative; perspective:1000px;
  }
  .envelope .flap{
    position:absolute; inset:0;
    background:linear-gradient(180deg,#7a1315,#231f20);
    clip-path:polygon(0 0,100% 0,50% 100%);
    transform-origin:top;
    transition:transform 1s cubic-bezier(.22,.61,.36,1);
    z-index:2; border-radius:8px 8px 6px 6px;
  }
  .envelope.open .flap{ transform:rotateX(180deg); }

  .envelope .inner{
    position:absolute; inset:0;
    background:#fff; border-radius:8px;
    display:flex; align-items:center; justify-content:center;
    color:#333; font-weight:600; font-size:.8rem;
    backface-visibility:hidden; z-index:1;
    box-shadow:0 6px 14px rgba(0,0,0,.10);
  }

  .envelope .seal{
    position:absolute; top:50%; left:50%;
    transform:translate(-50%,-50%) scale(.55);
    width:56px; height:56px; border-radius:50%;
    background:radial-gradient(circle at 30% 30%, #fff, #eee);
    display:grid; place-items:center;
    opacity:0; transition:opacity .5s 1s ease, transform .5s 1s ease;
    z-index:3; border:2px solid #d0d0d0;
    box-shadow:0 0 10px rgba(0,0,0,.08);
  }
  .envelope.open .seal{ opacity:1; transform:translate(-50%,-50%) scale(1); }

  .envelope .seal img{
    width:34px; height:34px; object-fit:contain;
    filter:drop-shadow(0 1px 2px rgba(0,0,0,.15));
  }

  .envelope .msg-final{
    position:absolute; left:0; right:0; bottom:-38px;
    text-align:center; opacity:0; transform:translateY(8px);
    transition:opacity .45s .2s ease, transform .45s .2s ease;
    font-weight:700;
  }
  .envelope.open .msg-final{ opacity:1; transform:translateY(0); }

  /* ‚úàÔ∏è decolagem do envelope */
  .envelope.takeoff{
    animation: takeoff 1.3s cubic-bezier(.22,.61,.36,1) forwards;
    animation-delay: 1.3s;
    will-change: transform, opacity, filter;
  }
  @keyframes takeoff{
    0%{ transform:translate(0,0) scale(1) rotate(0deg); opacity:1; filter:drop-shadow(0 6px 14px rgba(0,0,0,.15)); }
    60%{ transform:translate(60px,-90px) scale(.9) rotate(-10deg); filter:drop-shadow(0 10px 20px rgba(0,0,0,.18)); }
    100%{ transform:translate(120px,-180px) scale(.85) rotate(-14deg); opacity:0; filter:drop-shadow(0 12px 26px rgba(0,0,0,.22)); }
  }
  .envelope.takeoff::after{
    content:""; position:absolute; left:15%; bottom:-8px;
    width:10px; height:10px; border-radius:50%;
    background: radial-gradient(#ffffff, rgba(255,255,255,0));
    box-shadow:
      0 0 12px rgba(255,255,255,.9),
      -8px 10px 0 2px rgba(255,255,255,.25),
      -16px 18px 0 4px rgba(255,255,255,.18),
      -24px 28px 0 6px rgba(255,255,255,.10);
    opacity:.85;
  }
  @media (prefers-reduced-motion: reduce){
    .envelope.takeoff{ animation:none; opacity:1; transform:none; }
    .envelope.takeoff::after{ display:none; }
  }
</style>
{% endblock %}

{% block content %}
  <!-- Pill com s√≠mbolo do Programa de Multiplicadores -->
  <div class="pill">
    <img class="logo" src="{{ url_for('static', filename='img/multiplicadores_logo.png') }}"
         alt="Programa de Multiplicadores">
    <span>Programa Multiplicadores Ademicon</span>
  </div>

  <h1 class="title">Estamos muito felizes em contar com a sua presen√ßa neste encontro!</h1>
  <p class="subtitle">Matr√≠cula <span class="mono">{{ code }}</span> confirmada com sucesso.</p>

  <!-- Envelope menor e animado -->
  <div class="envelope-stage">
    <div id="envelope" class="envelope">
      <div class="flap"></div>
      <div class="inner"></div>

      <div class="seal">
        <img src="{{ url_for('static', filename='img/ademicon_logo.png') }}" alt="Logo Ademicon">
      </div>
    </div>
  </div>

  <div class="center mt">
    <h3>üéâ Multiplicador, sua presen√ßa foi confirmada!</h3>
    <p class="muted">
      ‚ú® Que este momento inspire novas conquistas e fortale√ßa nossa jornada juntos!
    </p>
  </div>
{% endblock %}

{% block scripts %}
<script>
  document.addEventListener('DOMContentLoaded', () => {
    const envelope = document.getElementById('envelope');
    setTimeout(() => envelope.classList.add('open'), 400);     // abre
    setTimeout(() => {
      const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      if (!prefersReduced) envelope.classList.add('takeoff');  // voa
    }, 1250);
  });
</script>
{% endblock %}